<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.css" rel="stylesheet">
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>

<div class="container" id="container">



</div>


<script type="text/babel">
    function Panel(props){
        return (
                <div className="panel panel-default">
                    <div className="panel-body">
                        <div className="row">
                            <div className="col-md-12">
                                <a href="asd.html"><h3 >{props["data"]["title"]}</h3></a>
                            </div>
                        </div>
                        <div className="row">
                            <div className="col-md-4 ">
                                <img src={props["data"]["icon"]} className="img-responsive">
                                </img>
                            </div>
                            <div className="col-md-8">
                                <div className="row">
                                    <p>{props["data"]["description"]}</p>
                                </div>
                            </div>
                        </div>
                        <div className="fixed-bottom">
                            <div className="col-md-2 col-md-offset-8">
                                <p><span className="glyphicon glyphicon-user" aria-hidden="true"></span>{props["data"]["author"]}</p>
                            </div>
                            <div className="col-md-2">
                                time
                            </div>
                        </div>
                    </div>
                </div>
        )
    }


    class Panellist extends React.Component {
        constructor(props) {
            super(props);
            this.state = {
                feeds: []
            };
        }

        componentDidMount() {
            console.log("DidMount")
            axios.get(`http://www.iyingdi.cn/feed/list/seed?&web=1&seed=2&system=web`)
                .then(res => {
                    console.log(res)
                    var feeds = res.data["feeds"]
                    this.setState({
                        feeds:feeds
                    })
                    console.log(this.state)
                });
        }

        getPanellist(){
            var panellist = []
            for(let i=0;i<this.state["feeds"].length;i++){
                var panel = <Panel data={this.state["feeds"][i]["feed"]} key={i.toString()}/>
                panellist.push(panel)
            }
            return panellist
        }

        render() {
            return (
                    <div>
                        {this.getPanellist()}
                    </div>
            );
        }
    }

    ReactDOM.render(
        <Panellist/>,
        document.getElementById('container')

    )



</script>
</body>
</html>